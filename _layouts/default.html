<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }} - {{ site.description }}</title>
    <meta name="description" content="{{ page.description | default: site.description }}">
    <meta name="theme-color" content="#5f4d93" />

    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    <link rel="preload" as="font"
        href="https://fonts.gstatic.com/s/spacegrotesk/v16/V8mQQoyeyJOyOTLUQy_J6NXHJ2QCAr0.woff2" type="font/woff2"
        crossorigin>

    
</head>

<body>
    <div class="scroll-progress" aria-hidden="true"></div>
    <div class="container">
        <div class="content-wrapper">
            <header>
                <p class="logo-container">
                    <img src="{{ '/assets/images/vibe-coder.png' | relative_url }}" alt="Vibe Coder"
                        class="logo-img">
                </p>
                <h1>{{ site.title }}</h1>
                <p class="subtitle">{{ site.description }}</p>
                <div class="theme-toggle-icons" role="group" aria-label="Theme toggle">
                    <button type="button" id="lightModeBtn" aria-pressed="false" title="Light mode"
                        aria-label="Light mode">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor"
                            xmlns="http://www.w3.org/2000/svg" class="size-3">
                            <g clip-path="url(#clip0_2880_7340)">
                                <path d="M8 1.11133V2.00022" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round"></path>
                                <path d="M12.8711 3.12891L12.2427 3.75735" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round"></path>
                                <path d="M14.8889 8H14" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round"></path>
                                <path d="M12.8711 12.8711L12.2427 12.2427" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round"></path>
                                <path d="M8 14.8889V14" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round"></path>
                                <path d="M3.12891 12.8711L3.75735 12.2427" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round"></path>
                                <path d="M1.11133 8H2.00022" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round"></path>
                                <path d="M3.12891 3.12891L3.75735 3.75735" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round"></path>
                                <path
                                    d="M8.00043 11.7782C10.0868 11.7782 11.7782 10.0868 11.7782 8.00043C11.7782 5.91402 10.0868 4.22266 8.00043 4.22266C5.91402 4.22266 4.22266 5.91402 4.22266 8.00043C4.22266 10.0868 5.91402 11.7782 8.00043 11.7782Z"
                                    stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </g>
                            <defs>
                                <clipPath id="clip0_2880_7340">
                                    <rect width="16" height="16" fill="white"></rect>
                                </clipPath>
                            </defs>
                        </svg>
                    </button>
                    <button type="button" id="darkModeBtn" aria-pressed="false" title="Dark mode"
                        aria-label="Dark mode">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor"
                            xmlns="http://www.w3.org/2000/svg" class="size-3">
                            <g clip-path="url(#clip0_2880_7355)">
                                <path
                                    d="M11.5556 10.4445C8.48717 10.4445 6.00005 7.95743 6.00005 4.88899C6.00005 3.68721 6.38494 2.57877 7.03294 1.66943C4.04272 2.22766 1.77783 4.84721 1.77783 8.0001C1.77783 11.5592 4.66317 14.4445 8.22228 14.4445C11.2196 14.4445 13.7316 12.3948 14.4525 9.62321C13.6081 10.1414 12.6187 10.4445 11.5556 10.4445Z"
                                    stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                            </g>
                            <defs>
                                <clipPath id="clip0_2880_7355">
                                    <rect width="16" height="16" fill="white"></rect>
                                </clipPath>
                            </defs>
                        </svg>
                    </button>
                </div>
                <div class="quick-nav">
                    <a href="#introduction">Introduction</a>
                    <a href="#rules-for-ai-assisted-pr-submissions">Rules for PRs</a>
                    <a href="#project-automation-for-the-ai-codingreview-workflow">Project Automation</a>
                    <a href="https://github.com/rvc-guide/rvc-guide.github.io" target="_blank" class="github-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
        		    <path d="M12 .5C5.65.5.5 5.65.5 12c0 5.09 3.29 9.4 7.86 10.93.58.11.79-.25.79-.56
        		    0-.28-.01-1.03-.02-2.02-3.2.69-3.87-1.54-3.87-1.54-.53-1.34-1.3-1.7-1.3-1.7
        		    -1.06-.73.08-.72.08-.72 1.17.08 1.78 1.2 1.78 1.2 1.04 1.78 2.73 1.27
        		    3.4.97.1-.76.41-1.27.74-1.56-2.55-.29-5.23-1.28-5.23-5.72
        		    0-1.26.45-2.29 1.19-3.09-.12-.29-.52-1.45.11-3.02 0 0
        		    .97-.31 3.18 1.18a11.07 11.07 0 0 1 5.79 0c2.21-1.49
        		    3.18-1.18 3.18-1.18.63 1.57.23 2.73.11 3.02.74.8 1.19
        		    1.83 1.19 3.09 0 4.45-2.68 5.43-5.24 5.72.42.36.79 1.08.79
        		    2.18 0 1.57-.01 2.83-.01 3.22 0 .31.21.68.8.56A10.999
        		    10.999 0 0 0 23.5 12C23.5 5.65 18.35.5 12 .5z" />
                        </svg>Contribute
                    </a>
                </div>
            </header>

            <main>
                {{ content }}
            </main>

            <footer>
                <p>The Responsible Vibe Coding guide is licensed under <a href="LICENSE">MIT
                        License</a></p>
            </footer>
        </div>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Principle boxes now use CSS-only hover effects for better performance

        // Auto-detect and style the rules section
        document.addEventListener('DOMContentLoaded', function () {
            // Scroll progress bar
            const progress = document.querySelector('.scroll-progress');
            const updateProgress = () => {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const docHeight = (document.documentElement.scrollHeight - document.documentElement.clientHeight) || 1;
                const progressWidth = Math.min(100, Math.max(0, (scrollTop / docHeight) * 100));
                progress.style.width = progressWidth + '%';
            };
            updateProgress();
            window.addEventListener('scroll', updateProgress, { passive: true });

            // Theme toggle
            const root = document.documentElement;
            const THEME_KEY = 'vibe-theme';
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const storedTheme = localStorage.getItem(THEME_KEY);
            const initialTheme = storedTheme || (prefersDark ? 'dark' : 'light');
            const lightBtn = document.getElementById('lightModeBtn');
            const darkBtn = document.getElementById('darkModeBtn');

            function applyTheme(theme) {
                if (!['light', 'dark'].includes(theme)) return;
                // Set explicit attribute for both, so CSS guards can detect user choice
                root.setAttribute('data-theme', theme);
                if (lightBtn && darkBtn) {
                    lightBtn.setAttribute('aria-pressed', String(theme === 'light'));
                    darkBtn.setAttribute('aria-pressed', String(theme === 'dark'));
                }
                try { localStorage.setItem(THEME_KEY, theme); } catch (_) { }
            }

            applyTheme(initialTheme);

            lightBtn && lightBtn.addEventListener('click', () => applyTheme('light'));
            darkBtn && darkBtn.addEventListener('click', () => applyTheme('dark'));

            // Find the rules section and add special styling
            const headings = document.querySelectorAll('h1, h2');
            headings.forEach(heading => {
                const text = heading.textContent.trim();
                if (text.includes('Rules for AI-Assisted PR Submissions')) {
                    heading.setAttribute('id', 'rules-for-ai-assisted-pr-submissions');

                    // Find the ul that follows this heading
                    let sibling = heading.nextElementSibling;
                    while (sibling) {
                        if (sibling.tagName === 'UL') {
                            sibling.classList.add('rules-list');
                            break;
                        }
                        sibling = sibling.nextElementSibling;
                    }
                }

                if (text.includes('Project automation for the Vibe Coding/Review Workflow')) {
                    heading.setAttribute('id', 'project-automation-for-the-vibe-codingreview-workflow');
                }
            });
        });
    </script>
</body>

</html>
